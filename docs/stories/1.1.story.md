# Story 1.1: Project Initialisation & Core Dependencies

## Status
Draft

## Story
**As a** Developer,
**I want** to establish the foundational Next.js monorepo project structure with all core dependencies and configurations,
**so that** I have a solid technical foundation to build the AI Food Photo Enhancer MVP features upon.

## Acceptance Criteria
1. **AC1**: Complete Next.js 15.4 application setup with TypeScript 5.8.3 in a monorepo structure using pnpm workspaces and Turborepo
2. **AC2**: Core dependencies installed and configured according to tech stack specifications (HeroUI 2.8.2, Tailwind CSS 4.1.2, Motion.dev 12.23.11)
3. **AC3**: Supabase 2.53.0 integration configured with database connection, authentication, and storage setup
4. **AC4**: Development environment configured with ESLint, testing framework (Vitest 3.2.4), and build pipeline
5. **AC5**: Basic project structure established following the unified project structure guidelines
6. **AC6**: Environment variables and configuration management set up for development/production environments
7. **AC7**: Initial deployment pipeline configured for Vercel platform

## Tasks / Subtasks
- [ ] **Task 1**: Initialize monorepo structure (AC: 1)
  - [ ] Create root package.json with pnpm workspaces configuration
  - [ ] Set up Turborepo configuration for build optimization
  - [ ] Create apps/web directory for main Next.js application
  - [ ] Create packages/ directory for shared components and configurations
  - [ ] Initialize packages/ui, packages/eslint-config, packages/tsconfig

- [ ] **Task 2**: Configure Next.js application with core dependencies (AC: 1, 2)
  - [ ] Initialize Next.js 15.4 app with TypeScript 5.8.3 in apps/web
  - [ ] Configure App Router structure
  - [ ] Install and configure HeroUI 2.8.2 component library
  - [ ] Set up Tailwind CSS 4.1.2 with glassmorphic design tokens
  - [ ] Configure Motion.dev 12.23.11 for animations
  - [ ] Set up Sharp.js 0.34.3 for image processing

- [ ] **Task 3**: Establish Supabase integration (AC: 3)
  - [ ] Install Supabase client library 2.53.0
  - [ ] Configure Supabase connection and environment variables
  - [ ] Set up authentication configuration
  - [ ] Configure file storage settings
  - [ ] Create initial database connection test

- [ ] **Task 4**: Configure development tooling (AC: 4)
  - [ ] Set up ESLint configuration in packages/eslint-config
  - [ ] Configure Vitest 3.2.4 testing framework
  - [ ] Set up TypeScript configuration in packages/tsconfig
  - [ ] Configure build pipeline with Turborepo
  - [ ] Set up development scripts and tooling

- [ ] **Task 5**: Implement unified project structure (AC: 5)
  - [ ] Create apps/web/app directory structure (App Router)
  - [ ] Set up apps/web/components directory for UI components
  - [ ] Create apps/web/lib directory for helper functions and clients
  - [ ] Establish proper file organization patterns
  - [ ] Create placeholder files to demonstrate structure

- [ ] **Task 6**: Environment and configuration management (AC: 6)
  - [ ] Set up environment variable management
  - [ ] Configure development/production environment separation
  - [ ] Set up Zod 4.0.14 for environment validation
  - [ ] Create configuration files for different environments
  - [ ] Document environment setup in README

- [ ] **Task 7**: Deploy and verify foundation (AC: 7)
  - [ ] Configure Vercel deployment settings
  - [ ] Set up continuous deployment pipeline
  - [ ] Deploy initial foundation to verify setup
  - [ ] Configure domain and basic routing
  - [ ] Verify all integrations work in production environment

## Dev Notes

### Tech Stack Configuration
**Source: [architecture.md#tech-stack]**

**Core Framework & Runtime:**
- Next.js 15.4 with React 19 compatibility, Turbopack, App Router stable
- TypeScript 5.8.3 with ES module improvements, new type checks
- Node.js 22.17.1 LTS with V8 12.4, built-in WebSocket, improved watch mode

**Frontend & UI:**
- HeroUI 2.8.2: 200+ components, React 19 typings, Tailwind v4 integration
- Tailwind CSS 4.1.2: Native CSS nesting, logical props, improved JIT caching
- Motion.dev 12.23.11: React 19 animations, async variants, reduced bundle size

**Backend & Services:**
- Supabase 2.53.0: Branching 2.0, Storage 10× uploads, Node 20+ target
- Sharp.js 0.34.3: Animated GIF→WebP fix, PDF background support
- Zod 4.0.14: v3/v4 permalinks, faster parsing, optional chaining fix

**Development Tools:**
- pnpm 10.13.1: Corepack-aware, new lockfile, faster hoisting
- Vitest 3.2.4: Snapshots v2, performance improvements, UI 2.2, Node 18+ default
- Sentry 9.43.0: OTEL 1.34, Vercel AI tracing, SpotLight suppression

### Repository Structure
**Source: [architecture.md#unified-project-structure]**

```plaintext
/
├── apps/
│   └── web/                # The main Next.js application
│       ├── app/            # App Router directories
│       ├── components/     # UI components (HeroUI based)
│       ├── lib/            # Helper functions, Stripe/Supabase clients
│       └── ...
├── packages/
│   ├── ui/                 # Shared, unstyled UI components
│   ├── eslint-config/      # Shared ESLint configuration
│   └── tsconfig/           # Shared TypeScript configuration
└── package.json            # Root package configuration
```

### Deployment Architecture
**Source: [architecture.md#deployment-architecture]**

- **Vercel Platform**: Next.js application deployment with Git integration, serverless functions for API, global edge network
- **Environment Management**: Isolated environments with encrypted environment variables
- **Continuous Deployment**: Git-based deployment pipeline with automatic builds

### Security Configuration
**Source: [architecture.md#security]**

- **Environment Variables**: All secrets and API keys managed as encrypted environment variables
- **Data Protection**: All data encrypted at rest and in transit
- **Infrastructure**: Environment isolation with secure server-side clients for admin operations

### Previous Story Insights
This is the first story, so no previous insights available.

## Testing

### Testing Standards
**Source: [architecture.md#tech-stack]**

- **Framework**: Vitest 3.2.4 with Snapshots v2, performance improvements
- **Test Location**: Tests should be co-located with components in `__tests__` directories or `.test.ts` files
- **Coverage**: Unit tests for utility functions, integration tests for API endpoints
- **Standards**: Follow testing pyramid approach with unit, integration, and end-to-end tests
- **Configuration**: Use shared test configuration from packages/tsconfig

### Testing Requirements for This Story
- Unit tests for environment configuration validation
- Integration tests for Supabase connection
- Build pipeline verification tests
- Deployment smoke tests

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 30-Jul-2025 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results

*Results from QA Agent review will be populated here after implementation*